!function(t){var i=function(i,e,o){function a(i){i.container||i.getContainer();if(t.utils.isIOS()&&t.utils.isSafari()&&t.utils.isMobile()){var e=i.config||i.getConfig();if(e.captions){var o=document.createElement("style");o.setAttribute("type","text/css"),o.setAttribute("id","jwioscaptions_"+i.id.toLowerCase()),document.getElementsByTagName("head")[0].appendChild(o);var a="";a+="#"+i.id+" video::-webkit-media-text-track-display{",a+="position:relative!important;height:100%!important;",a+="}",e.captions.windowColor?(a+="#"+i.id+" video::-webkit-media-text-track-display-backdrop{",a+="background-color:"+t.utils.hexToRgba(e.captions.windowColor,e.captions.windowOpacity||1)+"!important;",a+="position:absolute!important;left:0!important;right:0!important;bottom:0!important;",a+="}"):(a+="#"+i.id+" video::-webkit-media-text-track-display-backdrop{",a+="position:absolute!important;left:0!important;right:0!important;bottom:0!important;",a+="}"),a+="#"+i.id+" video::cue{",e.captions.backgroundColor&&(a+="background-color:"+t.utils.hexToRgba(e.captions.backgroundColor,e.captions.backgroundOpacity||1)+"!important;"),e.captions.color&&(a+="color:"+t.utils.hexToRgba(e.captions.color,e.captions.fontOpacity||1)+"!important;"),e.captions.fontsize&&(a+="font-size:"+e.captions.fontsize+"px!important;"),e.captions.edgeStyle&&("dropshadow"==e.captions.edgeStyle&&(a+="text-shadow: rgb(0, 0, 0) 0px 2px 1px!important;"),"raised"==e.captions.edgeStyle&&(a+="text-shadow: rgb(0, 0, 0) 0px 0px 5px, rgb(0, 0, 0) 0px 1px 5px, rgb(0, 0, 0) 0px 2px 5px!important;"),"depressed"==e.captions.edgeStyle&&(a+="text-shadow: rgb(0, 0, 0) 0px -2px 1px!important;"),"uniform"==e.captions.edgeStyle&&(a+="text-shadow: rgb(0, 0, 0) -2px 0px 1px, rgb(0, 0, 0) 2px 0px 1px, rgb(0, 0, 0) 0px -2px 1px, rgb(0, 0, 0) 0px 2px 1px, rgb(0, 0, 0) -1px 1px 1px, rgb(0, 0, 0) 1px 1px 1px, rgb(0, 0, 0) 1px -1px 1px, rgb(0, 0, 0) 1px 1px 1px!important;")),a+="}",o.styleSheet?o.styleSheet.cssText=a:o.innerHTML=a}}}function r(i){var e=i.container||i.getContainer();if(t.utils.isIOS()&&t.utils.isSafari()&&t.utils.isMobile()){var o=e.getElementsByTagName("video")[0];o&&(o.getAttribute("crossorigin")||o.setAttribute("crossorigin","anonymous"))}}function n(t){return t&&t.indexOf("://")>=0&&t.split("/")[2]!=window.location.href.split("/")[2]}function s(i){var o=i.container||i.getContainer();if(t.utils.isIOS()&&t.utils.isSafari()&&t.utils.isMobile()&&i.getCurrentCaptions()>0){var a=o.getElementsByTagName("video")[0];if(a){var r=a.getElementsByTagName("track");if(r)for(var s=r.length,l=0;s>=l;s--)r[s]&&a.removeChild(r[s]);var c=i.getPlaylistItem();if(c&&c.tracks&&c.tracks.length>0)for(var s in c.tracks){var d=c.tracks[s],u=document.createElement("track");for(var x in d)if("data"!=x&&"id"!=x){var g="file"==x?"src":x,f=d[x];if("file"==x&&e.xdcors===!0)var f=n(d[x])?top.location.protocol+"//www.dev."+p[2]+"/"+p[1]+"/"+p[3]+"/"+p[0]+"/?dom="+top.location.hostname+"&file="+d[x]:d[x];("default"!=x||"default"==x&&(d[x]===!0||"true"===d[x]))&&u.setAttribute(g,f)}a.appendChild(u)}}}}var p=["xdcors","solutions","powered-by-haiku.co.uk","jwioscaptions"];i.onReady(function(){r(i),a(i)}),i.onPlay(function(){t.utils.isIPad()||s(i)}),i.onFullscreen(function(e){if(t.utils.isIOS()&&t.utils.isSafari()&&t.utils.isMobile()&&!e.fullscreen){var o=i.container||i.getContainer(),a=o.getElementsByTagName("video")[0];if(a&&a.textTracks&&a.textTracks.length>0)for(var r=0,n=a.textTracks.length;n>r;r++)a.textTracks[r].mode="hidden"}t.utils.isIOS()&&t.utils.isSafari()&&t.utils.isMobile()&&t.utils.isIPad()&&e.fullscreen&&s(i)}),this.about={label:"Enable captions on iOS with JW Player",version:"v1.4 ~ January 2016",author:"James Herrieven ~ http://powered-by-haiku.co.uk"}};t().registerPlugin("jwioscaptions","6.0",i)}(jwplayer);